<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="./templates/template.xhtml">
	<ui:define name="body">
	<h:form id="passwordForm">
	 <p:growl id="message" />
	 <p:panelGrid columns="2">
	    <p:outputLabel for="currentPassword" value="Enter your current password" />
	    <p:password id="currentPassword" required="true" 
	     value="#{userManager.oldPassword}" />
	     
	     <p:outputLabel for="password1" value="Enter a new password" />
	     <p:password id="password1" required="true" 
	     value="#{userManager.newPassword}" feedback="true" inline="true"
	     match="password2" />
	     
	     <p:outputLabel for="password2" value="Confirm new password" />
	     <p:password id="password2" required="true" 
       value="#{userManager.newPassword}"  />
       </p:panelGrid>
       
       <p:commandButton id="submitButton" value="Submit"
        action="#{userManager.changePassword}" update="message" 
        onstart="passwordBlock.show();" oncomplete="passwordBlock.hide();"/>
       </h:form>
       
       <p:blockUI block="passwordForm" widgetVar="passwordBlock">
      <h:graphicImage library="img" name="ajax-loader.gif" />
    </p:blockUI>
	</ui:define>

</ui:composition>
</html>